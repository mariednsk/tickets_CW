<!DOCTYPE html>
<html lang="ru" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Редактировать спектакль</title>
</head>
<body>

<h1>Редактировать спектакль</h1>

<form th:action="@{'/admin/performances/edit/' + ${p.id}}" th:object="${p}" method="post" enctype="multipart/form-data">

    <div><label>Название</label><input type="text" th:field="*{title}" required></div>
    <div><label>Жанр</label><input type="text" th:field="*{genre}" required></div>
    <div><label>Дата</label><input type="date" th:field="*{date}" required></div>
    <div><label>Время</label><input type="time" th:field="*{time}" required></div>
    <div><label>Цена</label><input type="number" step="0.01" th:field="*{price}" required></div>
    <div><label>Описание</label><textarea th:field="*{description}"></textarea></div>

    <div th:if="${p.image != null}">
        <p>Текущая картинка:</p>
        <img th:src="@{'/uploads/' + ${p.image}}" style="max-width:250px;">
    </div>

    <div>
        <label>Новая картинка</label>
        <input type="file" name="imageFile" accept="image/*">
    </div>

    <div>
        <label>Актёры</label><br>
        <label th:each="a : ${actors}" style="display:inline-block;margin-right:10px;">
            <input type="checkbox" name="actorIds" th:value="${a.id}"
                   th:checked="${p.actors.contains(a)}">
            <span th:text="${a.fullName}"></span>
        </label>
    </div>

    <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}">
    <button type="submit">Сохранить</button>
</form>

<p><a href="/admin/performances">← назад</a></p>
</body>
</html>
