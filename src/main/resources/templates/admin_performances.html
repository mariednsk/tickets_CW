<!DOCTYPE html>
<html lang="ru" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Добавить спектакль</title>
</head>
<body>

<h1>Добавить спектакль</h1>

<form th:action="@{/admin/performances/add}" th:object="${p}" method="post" enctype="multipart/form-data">

    <div><label>Название</label><input type="text" th:field="*{title}" required></div>
    <div><label>Жанр</label><input type="text" th:field="*{genre}" required></div>
    <div><label>Дата</label><input type="date" th:field="*{date}" required></div>
    <div><label>Время</label><input type="time" th:field="*{time}" required></div>
    <div><label>Цена</label><input type="number" step="0.01" th:field="*{price}" required></div>
    <div><label>Описание</label><textarea th:field="*{description}"></textarea></div>

    <div>
        <label>Картинка</label>
        <input type="file" name="imageFile" accept="image/*">
    </div>

    <div>
        <label>Актёры</label><br>
        <label th:each="a : ${actors}" style="display:inline-block;margin-right:10px;">
            <input type="checkbox" name="actorIds" th:value="${a.id}">
            <span th:text="${a.fullName}"></span>
        </label>
    </div>

    <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}">
    <button type="submit">Добавить</button>
</form>

<hr>

<h3>Список спектаклей</h3>
<div th:each="p : ${performances}" style="border:1px solid #ccc;padding:10px;margin:10px 0;">
    <b th:text="${p.title}"></b>
    <div th:text="${p.genre + ' · ' + p.date + ' ' + p.time}"></div>
    <div>Актёры: <span th:each="a : ${p.actors}" th:text="${a.fullName + ' '}"></span></div>
    <a th:href="@{'/admin/performances/edit/' + ${p.id}}">Редактировать</a>
    <form th:action="@{'/admin/performances/delete/' + ${p.id}}" method="post" style="display:inline;">
        <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}">
        <button type="submit" onclick="return confirm('Удалить спектакль?')">Удалить</button>
    </form>
</div>

</body>
</html>
