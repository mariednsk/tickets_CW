<!DOCTYPE html>
<html lang="ru" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±–∏–ª–µ—Ç–∞–º–∏ ‚Äî –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å</title>
    <link rel="stylesheet" href="https://www.w3schools.com/w3css/5/w3.css">
    <link rel="stylesheet" th:href="@{/css/main.css}" />
    <style>
        /* –†–∞–≤–Ω–æ–º–µ—Ä–Ω–∞—è —à–∞–ø–∫–∞ ‚Äî 5 –∫–Ω–æ–ø–æ–∫ */
        .topbar .w3-col { width: 20%; }

        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 30px;
            background: white;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 8px 25px rgba(0,0,0,0.1);
        }

        th {
            background: #321b0c;
            color: white;
            padding: 16px;
            text-align: left;
            font-weight: bold;
        }

        td {
            padding: 14px 16px;
            border-bottom: 1px solid #eee;
        }

        tr:hover {
            background: #f8f5f0;
        }

        .btn {
            background: #321b0c;
            color: white;
            padding: 8px 14px;
            border-radius: 6px;
            text-decoration: none;
            font-size: 14px;
            margin-right: 8px;
            display: inline-block;
        }

        .btn:hover {
            background: #4b3224;
        }

        .btn-danger {
            background: #a94442;
        }

        .btn-danger:hover {
            background: #c9302c;
        }

        .no-tickets {
            text-align: center;
            padding: 80px;
            font-size: 20px;
            color: #888;
            background: white;
            border-radius: 12px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.08);
        }
    </style>
</head>
<body>

<!-- –†–∞–≤–Ω–æ–º–µ—Ä–Ω–∞—è –∞–¥–º–∏–Ω—Å–∫–∞—è —à–∞–ø–∫–∞ -->
<div class="topbar">
    <div class="w3-row w3-padding">
        <div class="w3-col"><a th:href="@{/admin/dashboard}" class="w3-button w3-block">–ü–∞–Ω–µ–ª—å</a></div>
        <div class="w3-col"><a th:href="@{/admin/performances}" class="w3-button w3-block">–°–ø–µ–∫—Ç–∞–∫–ª–∏</a></div>
        <div class="w3-col"><a th:href="@{/admin/actors}" class="w3-button w3-block">–ê–∫—Ç—ë—Ä—ã</a></div>
        <div class="w3-col"><a th:href="@{/admin/tickets}" class="w3-button w3-block">–ë–∏–ª–µ—Ç—ã</a></div>
        <div class="w3-col">
            <form th:action="@{/logout}" method="post" style="margin:0;">
                <button class="w3-button w3-block" type="submit">–í—ã–π—Ç–∏</button>
            </form>
        </div>
    </div>
</div>

<div class="container">
    <h1 style="text-align:center;color:#321b0c;margin:40px 0;">–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±–∏–ª–µ—Ç–∞–º–∏</h1>

    <div th:if="${tickets.isEmpty()}" class="no-tickets">
        –ü–æ–∫–∞ –Ω–µ—Ç –∫—É–ø–ª–µ–Ω–Ω—ã—Ö –±–∏–ª–µ—Ç–æ–≤
    </div>

    <table th:unless="${tickets.isEmpty()}">
        <thead>
        <tr>
            <th>ID</th>
            <th>–°–ø–µ–∫—Ç–∞–∫–ª—å</th>
            <th>–î–∞—Ç–∞ –∏ –≤—Ä–µ–º—è</th>
            <th>–ü–æ–∫—É–ø–∞—Ç–µ–ª—å</th>
            <th>–ú–µ—Å—Ç–æ</th>
            <th>–¶–µ–Ω–∞</th>
            <th>–î–µ–π—Å—Ç–≤–∏—è</th>
        </tr>
        </thead>
        <tbody>
        <tr th:each="ticket : ${tickets}">
            <td th:text="${ticket.id}">1</td>
            <td th:text="${ticket.eventName}">–ù–∞–∑–≤–∞–Ω–∏–µ</td>
            <td th:text="${ticket.performance.date + ' ' + ticket.performance.time}">–î–∞—Ç–∞</td>
            <td>
                <span th:text="${ticket.buyerName}">–ò–º—è</span>
                <br>
                <small th:if="${ticket.user}" th:text="'(' + ${ticket.user.username} + ')'">(@user)</small>
            </td>
            <td>
                    <span th:if="${ticket.seat != null}">
                        –†—è–¥ <span th:text="${ticket.seat.rowLabel}"></span>,
                        –º–µ—Å—Ç–æ <span th:text="${ticket.seat.seatNumber}"></span>
                    </span>
                <span th:if="${ticket.seat == null}">‚Äî</span>
            </td>
            <td th:text="${ticket.performance.price} + ' ‚ÇΩ'">1000 ‚ÇΩ</td>
            <td>
                <a th:href="@{'/admin/tickets/edit/' + ${ticket.id}}" class="btn">‚úèÔ∏è –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å</a>
                <form th:action="@{'/admin/tickets/delete/' + ${ticket.id}}" method="post" style="display:inline;">
                    <button type="submit" class="btn btn-danger"
                            onclick="return confirm('–û—Ç–º–µ–Ω–∏—Ç—å –±–∏–ª–µ—Ç? –ú–µ—Å—Ç–æ –æ—Å–≤–æ–±–æ–¥–∏—Ç—Å—è.')">
                        üóëÔ∏è –£–¥–∞–ª–∏—Ç—å
                    </button>
                </form>
            </td>
        </tr>
        </tbody>
    </table>
</div>

</body>
</html>